<?xml version="1.0" encoding="utf-8"?>
<js:knimeNode xmlns:js="http://knime.org/dynamicjsnode/v3.0"
	xmlns="http://knime.org/dynamicnode/v3.0" xmlns:n="http://knime.org/node/v2.12"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://knime.org/dynamicjsnode/v3.0 http://www.knime.org/node/dynamicJSNode_v3.0.xsd"
	jsNamespace="sunburst_namespace" nodeID="sunburst_chart" categoryPath="/preview"
	icon="../js.png" type="Visualizer">
	<name>JavaScript Sunburst Chart</name>
	<shortDescription>A sunburst chart based on the d3.js library.</shortDescription>
	<fullDescription>
		<intro>
			<n:p>
				In this chart hierarchical data is displayed in a radial layout.
				The further inside an arc is, the higher it is in the hierarchy.
				The
				area of each arcs is proportional to it's value.
			</n:p>
		</intro>
		<tab name="Options">
			<options>
				<columnFilterOption name="Path columns" id="pathColumns"
					inPortIndex="0" label="Path columns" filterClasses="org.knime.core.data.StringValue">
					Select the
					columns which you wish to include for the paths.
				</columnFilterOption>
				<columnSelectorOption name="Frequency column"
					id="freqColumn" inPortIndex="0" label="Frequency Column"
					filterClasses="org.knime.core.data.IntValue"
					allowNoneColumn="true"
					optional="true"
					>
					Select the column with the frequency information for
					the paths.
				</columnSelectorOption>
				<checkBoxOption name="Filter out tiny nodes" id="filterSmallNodes"
					label="Filter out tiny nodes" defaultValue="true" saveInView="true">
					When checked, very small nodes are not displayed.
				</checkBoxOption>
			</options>
		</tab>

		<tab name="General Plot Options">
			<options>
				<stringOption name="Title" id="title" label="Title"
					defaultValue="Sunburst Chart" optional="true" saveInView="true">
					The chart title.
				</stringOption>
				<stringOption name="Subitle" id="subtitle" label="Subtitle"
					optional="true" saveInView="true">
					The chart subtitle.
				</stringOption>
				<checkBoxOption name="Display legend" id="legend"
					label="Display legend" defaultValue="true" saveInView="true">
					When checked,
					the sunburst chart legend is displayed.
				</checkBoxOption>
				<checkBoxOption name="Display breadcrumb" id="breadcrumb"
					label="Display breadcrumb" defaultValue="false" saveInView="true">
					When
					checked, a breadcrumb is displayed on mouseover.
				</checkBoxOption>
				<stringListOption name="Aggregation Type" id="aggregationType"
					label="Aggregation Type" possibleValues="count size"
					defaultValues="size" saveInView="true">
					Choose how partition size is aggregated.
				</stringListOption>
				<checkBoxOption name="Enable zoom" id="zoomable"
					label="Enable zoom" defaultValue="false" saveInView="true">
					When checked,
					zooming into the chart partitions is enabled.
				</checkBoxOption>
				<!-- TODO: enable relationship -->
				<checkBoxOption name="Enable inner label" id="innerLabel"
					label="Enable inner label" defaultValue="true" saveInView="true">
					When
					checked, an inner label is displayed on mouseover.
				</checkBoxOption>
				<stringListOption name="Inner label style" id="innerLabelStyle"
					label="Inner label style" possibleValues="count percentage"
					defaultValues="percentage">
					Choose how inner label is displayed.
				</stringListOption>
				<stringOption name="Inner label text" id="innerLabelText"
					label="Inner label text" optional="true" saveInView="true"
					enableDependency="innerLabel">
					The inner label text.
				</stringOption>

				<svgOption name="Image" id="svg" portIndex="0" label="Image"
					additionalWait="500" defaultWidth="600" defaultHeight="400"
					defaultFullscreen="true">
					Settings for image generation.
				</svgOption>
			</options>
		</tab>

		<tab name="Control Options">
			<options>
				<checkBoxOption name="Enable view controls" id="enableViewControls"
					label="Enable view controls" defaultValue="true">
					Check to enable controls in the chart.
				</checkBoxOption>
				<checkBoxOption name="Enable title editing" id="enableTitleEdit"
					label="Enable title editing" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable the editing of the title within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable subtitle editing" id="enableSubtitleEdit"
					label="Enable subtitle editing" defaultValue="true"
					enableDependency="enableViewControls" enableValue="true">
					Check to enable the editing of the subtitle within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable filter tiny nodes toggle" id="filterSmallNodesToggle"
					label="Enable filter tiny nodes toggle" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable toggling of filtering for tiny nodes within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable legend toggle" id="legendToggle"
					label="Enable legend toggle" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable toggling of the legend within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable breadcrumb toggle" id="breadcrumbToggle"
					label="Enable breadcrumb toggle" defaultValue="true"
					enableDependency="enableViewControls" enableValue="true">
					Check to enable toggling of the breadcrumb within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable aggregation type selection" id="aggregationTypeSelect"
					label="Enable aggregation type selection" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable selection of aggregation type within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable zoomable toggle" id="zoomableToggle"
					label="Enable zoomable toggle" defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable toggling of zoom within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable inner label toggle" id="innerLabelToggle"
					label="Enable inner label toggle" defaultValue="true"
					enableDependency="enableViewControls" enableValue="true">
					Check to enable toggling of the inner label within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable inner label style selection"
					id="innerLabelStyleSelect" label="Enable inner label style selection"
					defaultValue="true" enableDependency="enableViewControls"
					enableValue="true">
					Check to enable selection of inner label style within the view.
				</checkBoxOption>
				<checkBoxOption name="Enable inner label editing" id="enableInnerLabelEdit"
					label="Enable inner label editing" defaultValue="true"
					enableDependency="enableViewControls" enableValue="true">
					Check to enable the editing of the inner label within the view.
				</checkBoxOption>
			</options>
		</tab>

	</fullDescription>
	<interactiveView name="JavaScript Sunburst Chart">
		A d3.js implementation of a sunburst chart.
	</interactiveView>
	<ports>
		<inPort portType="Data" name="Display data" index="0">
			Data table
			containing one column for the frequency of the corresponding
			sequence.
			All other columns give the sequence, where the first column
			is the first entry in the sequence.
		</inPort>
		<!--<inPort portType="Data" name="Stream color data" index="1"
			optional="true">
			Data table containing one column with the names of the
			entries. Each name has a color assigned to it.
		</inPort>-->
		<!--<outPort portType="Image" name="Sequences sunburst image"
			index="0">
			SVG image of the sequences sunburst chart.
		</outPort>-->
	</ports>
	<js:resources>
		<!-- Added for inlining style rules when generating svg -->
		<js:resource type="css" path="styles.css" />
		<js:resource type="js" path="sunburst.js" />
	</js:resources>
	<js:dependencies>
		<js:dependency name="D3" path="D3_3.2.8" type="local" />
		<js:dependency name="jQuery" path="jQuery_1.11.0" type="local" />
	</js:dependencies>
	<js:javaProcessor
		className="org.knime.dynamic.js.base.sunburst.SunburstProcessor"
		hidesLimitRowOption="false" />
</js:knimeNode>
